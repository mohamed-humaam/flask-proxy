version: '3'
services:
  flask-proxy:
    build: .
    ports:
      - "5001:5001"
    environment:
      DESTINATION_URL: https://api.cinex.pro/api/payment/checkout
      SECRET_KEY: web-hook
      RATE_LIMIT: 10 per minute
      DEBUG: 'False'
      PORT: 5001
    volumes:
      - ./logs:/app/logs

  nginx:
    image: nginx:latest
    ports:
      - "443:443"
      - "80:80"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf:ro
      - /path/to/your/certs:/etc/nginx/certs:ro
    depends_on:
      - flask-proxy
